using System;
using System.Collections.Generic;
using FullSerializer;
using UnityEngine;

// Token: 0x020002AB RID: 683
[fsObject(MemberSerialization = fsMemberSerialization.OptOut)]
public partial class TeamManager : GenericManager<Team>
{
	// Token: 0x06001403 RID: 5123
	public void TeamRebrand()
	{



		float finance = 0f;
		float unhappya = 0f;
		float unhappyb = 0f;
		float happy = 0f;
		float remove = 0.8f; 
		float add = 0.4f;
		




		float team = 0f;
		float team2 = 0f;
		float team3 = 0f;
		if (Game.instance.time.now.Month > 5)
		{
			float t = MathsUtility.Clamp((Game.instance.player.stats.loyalty + Game.instance.player.stats.loyalty + Game.instance.player.stats.raceManagement - 15f + (float)RandomUtility.GetRandom(0, 10)) / 55f, 0f, 1f);
			float t2 = MathsUtility.Clamp((Game.instance.player.stats.loyalty + Game.instance.player.stats.loyalty + Game.instance.player.stats.raceManagement - 15f + (float)RandomUtility.GetRandom(0, 10)) / 15f, 0f, 1f);
			float t3 = MathsUtility.Clamp((Game.instance.player.stats.loyalty + Game.instance.player.stats.loyalty + Game.instance.player.stats.raceManagement - 15f + (float)RandomUtility.GetRandom(0, 10)) / 35f, 0f, 1f);
			team = (float)Mathf.RoundToInt(Mathf.Lerp(29f, 0f, t));
			team2 = (float)Mathf.RoundToInt(Mathf.Lerp(49f, 30f, t2));
			team3 = (float)Mathf.RoundToInt(Mathf.Lerp(61f, 50f, t3));
		}
		List<Team> teamList = Game.instance.championshipManager.GetChampionshipByID(0).standings.GetTeamList();
		EntityManager arg_1CC_0 = Game.instance.entityManager;
		List<DatabaseEntry> teamData = App.instance.database.teamData;
		int num = 0;
		if (teamData.Count > 72)
		{
			num = 62 - teamData.Count + teamData[0].GetIntValue("Opinions - Manager");
		}
		if (teamData.Count >= 72)
		{
			for (int i = 0; i < teamData.Count + num; i++)
			{
				if (base.count <= 200)
				{
						Team WOW = arg_1CC_0.CreateEntity<Team>();
						base.AddEntity(WOW);
				}
				base.GetEntity(i + teamData.Count + num).name = base.GetEntity(i).name;
				base.GetEntity(i).liveryID = RandomUtility.GetRandomInc(0, 74);
				float random = RandomUtility.GetRandom01();
				int random2 = RandomUtility.GetRandom(0, teamData.Count);
				int num2 = i;
				bool flag = false;
				bool flag2 = false;
				bool flag3 = false;
				for (int j = 0; j <= 2; j++)
				{
					teamList = Game.instance.championshipManager.GetChampionshipByID(j).standings.GetTeamList();
					for (int k = 0; k < teamList.Count; k++)
					{
						if (base.GetEntity(i).teamID == teamList[k].teamID)
						{
							flag = true;
						}
					}
				}
				if (flag)
				{
					for (int l = 0; l <= 2; l++)
					{
						teamList = Game.instance.championshipManager.GetChampionshipByID(l).standings.GetTeamList();
						for (int m = 0; m < teamList.Count; m++)
						{
							if (random2 == teamList[m].teamID)
							{
								num2 = i - 1;
							}
						}
					}
				}
				for (int n = 3; n <= 4; n++)
				{
					teamList = Game.instance.championshipManager.GetChampionshipByID(n).standings.GetTeamList();
					for (int num3 = 0; num3 < teamList.Count; num3++)
					{
						if (base.GetEntity(i).teamID == teamList[num3].teamID)
						{
							flag2 = true;
						}
					}
				}
				if (flag2)
				{
					for (int num4 = 3; num4 <= 4; num4++)
					{
						teamList = Game.instance.championshipManager.GetChampionshipByID(num4).standings.GetTeamList();
						for (int num5 = 0; num5 < teamList.Count; num5++)
						{
							if (random2 == teamList[num5].teamID)
							{
								num2 = i - 1;
							}
						}
					}
				}
				for (int num6 = 5; num6 <= 6; num6++)
				{
					teamList = Game.instance.championshipManager.GetChampionshipByID(num6).standings.GetTeamList();
					for (int num7 = 0; num7 < teamList.Count; num7++)
					{
						if (base.GetEntity(i).teamID == teamList[num7].teamID)
						{
							flag3 = true;
						}
					}
				}
				if (flag3)
				{
					for (int num8 = 5; num8 <= 6; num8++)
					{
						teamList = Game.instance.championshipManager.GetChampionshipByID(num8).standings.GetTeamList();
						for (int num9 = 0; num9 < teamList.Count; num9++)
						{
							if (random2 == teamList[num9].teamID)
							{
								num2 = i - 1;
							}
						}
					}
				}
				if (base.GetEntity(i).financeController.finance.currentBudget < -5000000L && !base.GetEntity(i).isCreatedByPlayer && random < finance && num2 == i && base.GetEntity(i).teamID < 999)
				{
					base.GetEntity(i).name = teamData[random2].GetStringValue("Name");
					base.GetEntity(i).locationID = teamData[random2].GetStringValue("Location ID");
					base.GetEntity(i).colorID = teamData[random2].GetIntValue("Color");
					base.GetEntity(i).nationality = Nationality.GetNationalityByName(teamData[random2].GetStringValue("Location"));
					base.GetEntity(i).teamID = random2;
					base.GetEntity(i).aggression = teamData[random2].GetFloatValue("Aggression");
					base.GetEntity(i).fanBase = teamData[random2].GetFloatValue("Fan Base");
					base.GetEntity(i).votingCharacteristics = this.GetCharacteristics(teamData[random2].GetStringValue("Political Attributes"));
					if (RandomUtility.GetRandom01() < 0.8f)
					{
						base.GetEntity(i).contractManager.FireDriver(base.GetEntity(i).GetDriver(0), Contract.ContractTerminationType.FiredByPlayer);
						base.GetEntity(i).contractManager.HireReplacementDriver();
						base.GetEntity(i).contractManager.FireDriver(base.GetEntity(i).GetDriver(1), Contract.ContractTerminationType.FiredByPlayer);
						base.GetEntity(i).contractManager.HireReplacementDriver();
						base.GetEntity(i).contractManager.FireDriver(base.GetEntity(i).GetDriver(2), Contract.ContractTerminationType.FiredByPlayer);
						base.GetEntity(i).contractManager.HireReplacementDriver();
					}
					if (RandomUtility.GetRandom01() < 4f)
					{
						base.GetEntity(i).financeController.finance.currentBudget = (long)(teamData[random2].GetFloatValue("Budget") * 1000000f);
					}
					if (RandomUtility.GetRandom01() < 0.8f)
					{
						base.GetEntity(i).headquarters.ResetHeadquarters();
					}
					if (RandomUtility.GetRandom01() < 0.8f)
					{
						base.GetEntity(i).sponsorController.ClearAllSponsors();
						base.GetEntity(i).sponsorController.ClearAllSponsorOffers();
					}
					if (RandomUtility.GetRandom01() < 1f)
					{
						base.GetEntity(i).carManager.AdaptPartsForNewSeason1(0.7f, 1f);
					}
					StringVariableParser.promotedTeam = base.GetEntity(i + teamData.Count + num);
					StringVariableParser.rumourTeam = base.GetEntity(i);
					Game.instance.dialogSystem.SendMail(new DialogCriteria[]
					{
						new DialogCriteria("Who", "MediaPerson"),
						new DialogCriteria("Source", "FinancialTakeover"),
						new DialogCriteria("Type", "Header")
					});
					num2 = i - 1;
				}
				if (random < unhappya || (random < unhappyb && base.GetEntity(i).chairman.happinessNormalized < 0.1f && !base.GetEntity(i).isCreatedByPlayer && num2 == i && base.GetEntity(i).teamID < 999))
				{
					base.GetEntity(i).name = teamData[random2].GetStringValue("Name");
					base.GetEntity(i).locationID = teamData[random2].GetStringValue("Location ID");
					base.GetEntity(i).colorID = teamData[random2].GetIntValue("Color");
					base.GetEntity(i).nationality = Nationality.GetNationalityByName(teamData[random2].GetStringValue("Location"));
					base.GetEntity(i).teamID = random2;
					base.GetEntity(i).aggression = teamData[random2].GetFloatValue("Aggression");
					base.GetEntity(i).fanBase = teamData[random2].GetFloatValue("Fan Base");
					base.GetEntity(i).votingCharacteristics = this.GetCharacteristics(teamData[random2].GetStringValue("Political Attributes"));
					if (RandomUtility.GetRandom01() < 0.5f)
					{
						base.GetEntity(i).contractManager.FireDriver(base.GetEntity(i).GetDriver(0), Contract.ContractTerminationType.FiredByPlayer);
						base.GetEntity(i).contractManager.HireReplacementDriver();
					}
					if (RandomUtility.GetRandom01() < 0.5f)
					{
						base.GetEntity(i).contractManager.FireDriver(base.GetEntity(i).GetDriver(1), Contract.ContractTerminationType.FiredByPlayer);
						base.GetEntity(i).contractManager.HireReplacementDriver();
					}
					if (RandomUtility.GetRandom01() < 0.5f)
					{
						base.GetEntity(i).contractManager.FireDriver(base.GetEntity(i).GetDriver(2), Contract.ContractTerminationType.FiredByPlayer);
						base.GetEntity(i).contractManager.HireReplacementDriver();
					}
					if (RandomUtility.GetRandom01() < 1f)
					{
						base.GetEntity(i).financeController.finance.currentBudget -= (long)(teamData[random2].GetFloatValue("Budget") * 100000f);
					}
					if (RandomUtility.GetRandom01() < 0.5f)
					{
						base.GetEntity(i).headquarters.ResetHeadquarters();
					}
					if (RandomUtility.GetRandom01() < 0.5f)
					{
						base.GetEntity(i).sponsorController.ClearAllSponsors();
						base.GetEntity(i).sponsorController.ClearAllSponsorOffers();
					}
					if (RandomUtility.GetRandom01() < 0.8f)
					{
						base.GetEntity(i).carManager.AdaptPartsForNewSeason1(0.7f, 1.3f);
					}
					StringVariableParser.promotedTeam = base.GetEntity(i + teamData.Count + num);
					StringVariableParser.rumourTeam = base.GetEntity(i);
					Game.instance.dialogSystem.SendMail(new DialogCriteria[]
					{
						new DialogCriteria("Who", "MediaPerson"),
						new DialogCriteria("Source", "UnhappyTakeover"),
						new DialogCriteria("Type", "Header")
					});
					num2 = i - 1;
				}
				if (random < happy && !base.GetEntity(i).isCreatedByPlayer && num2 == i && base.GetEntity(i).teamID < 999)
				{
					base.GetEntity(i).votingCharacteristics = this.GetCharacteristics(teamData[random2].GetStringValue("Political Attributes"));
					base.GetEntity(i).name = teamData[random2].GetStringValue("Name");
					base.GetEntity(i).locationID = teamData[random2].GetStringValue("Location ID");
					base.GetEntity(i).colorID = teamData[random2].GetIntValue("Color");
					base.GetEntity(i).nationality = Nationality.GetNationalityByName(teamData[random2].GetStringValue("Location"));
					base.GetEntity(i).teamID = random2;
					base.GetEntity(i).aggression = teamData[random2].GetFloatValue("Aggression");
					if (RandomUtility.GetRandom01() < 0f)
					{
						base.GetEntity(i).contractManager.FireDriver(base.GetEntity(i).GetDriver(0), Contract.ContractTerminationType.FiredByPlayer);
						base.GetEntity(i).contractManager.HireReplacementDriver();
						base.GetEntity(i).contractManager.FireDriver(base.GetEntity(i).GetDriver(1), Contract.ContractTerminationType.FiredByPlayer);
						base.GetEntity(i).contractManager.HireReplacementDriver();
						base.GetEntity(i).contractManager.FireDriver(base.GetEntity(i).GetDriver(2), Contract.ContractTerminationType.FiredByPlayer);
						base.GetEntity(i).contractManager.HireReplacementDriver();
					}
					if (RandomUtility.GetRandom01() < 0.75f)
					{
						base.GetEntity(i).financeController.finance.currentBudget += (long)(teamData[random2].GetFloatValue("Budget") * 100000f);
					}
					if (RandomUtility.GetRandom01() < 0f)
					{
						base.GetEntity(i).headquarters.ResetHeadquarters();
					}
					if (RandomUtility.GetRandom01() < 0.1f)
					{
						base.GetEntity(i).sponsorController.ClearAllSponsors();
						base.GetEntity(i).sponsorController.ClearAllSponsorOffers();
					}
					if (RandomUtility.GetRandom01() < 1f)
					{
						base.GetEntity(i).carManager.AdaptPartsForNewSeason1(1f, 1.3f);
					}
					StringVariableParser.promotedTeam = base.GetEntity(i + teamData.Count + num);
					StringVariableParser.rumourTeam = base.GetEntity(i);
					Game.instance.dialogSystem.SendMail(new DialogCriteria[]
					{
						new DialogCriteria("Who", "MediaPerson"),
						new DialogCriteria("Source", "HappyTakeover"),
						new DialogCriteria("Type", "Header")
					});
					num2 = i - 1;
				}
				if (Game.instance.time.now.Month < 6 && random < remove && (base.GetEntity(i).championship.championshipID == 0 || base.GetEntity(i).championship.championshipID == 1 || base.GetEntity(i).championship.championshipID == 2) && base.GetEntity(i).teamID < 999 && Game.instance.championshipManager.GetChampionshipByID(base.GetEntity(i).championship.championshipID).standings.GetTeamList().Count > 8 && !base.GetEntity(i).IsPlayersTeam() && num2 == i)
				{
					base.GetEntity(i).contractManager.FireDriver(base.GetEntity(i).GetDriver(0), Contract.ContractTerminationType.FiredByPlayer);
					base.GetEntity(i).contractManager.HireReplacementDriver();
					base.GetEntity(i).contractManager.FireDriver(base.GetEntity(i).GetDriver(1), Contract.ContractTerminationType.FiredByPlayer);
					base.GetEntity(i).contractManager.HireReplacementDriver();
					base.GetEntity(i).contractManager.FireDriver(base.GetEntity(i).GetDriver(2), Contract.ContractTerminationType.FiredByPlayer);
					base.GetEntity(i).contractManager.HireReplacementDriver();
					base.GetEntity(i).headquarters.ResetHeadquarters();
					base.GetEntity(i).sponsorController.ClearAllSponsors();
					base.GetEntity(i).sponsorController.ClearAllSponsorOffers();
					base.GetEntity(i).teamID = 1000;
					StringVariableParser.rumourTeam = base.GetEntity(i);
					Game.instance.dialogSystem.SendMail(new DialogCriteria[]
					{
						new DialogCriteria("Who", "MediaPerson"),
						new DialogCriteria("Source", "Remove"),
						new DialogCriteria("Type", "Header")
					});
					num2 = i - 1;
				}
				if (Game.instance.time.now.Month < 6 && random < remove && (base.GetEntity(i).championship.championshipID == 3 || base.GetEntity(i).championship.championshipID == 4) && base.GetEntity(i).teamID < 999 && Game.instance.championshipManager.GetChampionshipByID(base.GetEntity(i).championship.championshipID).standings.GetTeamList().Count > 8 && !base.GetEntity(i).IsPlayersTeam() && num2 == i)
				{
					base.GetEntity(i).contractManager.FireDriver(base.GetEntity(i).GetDriver(0), Contract.ContractTerminationType.FiredByPlayer);
					base.GetEntity(i).contractManager.HireReplacementDriver();
					base.GetEntity(i).contractManager.FireDriver(base.GetEntity(i).GetDriver(1), Contract.ContractTerminationType.FiredByPlayer);
					base.GetEntity(i).contractManager.HireReplacementDriver();
					base.GetEntity(i).contractManager.FireDriver(base.GetEntity(i).GetDriver(2), Contract.ContractTerminationType.FiredByPlayer);
					base.GetEntity(i).contractManager.HireReplacementDriver();
					base.GetEntity(i).headquarters.ResetHeadquarters();
					base.GetEntity(i).sponsorController.ClearAllSponsors();
					base.GetEntity(i).sponsorController.ClearAllSponsorOffers();
					base.GetEntity(i).teamID = 2000;
					StringVariableParser.rumourTeam = base.GetEntity(i);
					Game.instance.dialogSystem.SendMail(new DialogCriteria[]
					{
						new DialogCriteria("Who", "MediaPerson"),
						new DialogCriteria("Source", "Remove"),
						new DialogCriteria("Type", "Header")
					});
					num2 = i - 1;
				}
				if (Game.instance.time.now.Month < 6 && random < remove && (base.GetEntity(i).championship.championshipID == 5 || base.GetEntity(i).championship.championshipID == 6) && base.GetEntity(i).teamID < 999 && Game.instance.championshipManager.GetChampionshipByID(base.GetEntity(i).championship.championshipID).standings.GetTeamList().Count > 4 && !base.GetEntity(i).IsPlayersTeam() && num2 == i)
				{
					base.GetEntity(i).contractManager.FireDriver(base.GetEntity(i).GetDriver(0), Contract.ContractTerminationType.FiredByPlayer);
					base.GetEntity(i).contractManager.HireReplacementDriver();
					base.GetEntity(i).contractManager.FireDriver(base.GetEntity(i).GetDriver(1), Contract.ContractTerminationType.FiredByPlayer);
					base.GetEntity(i).contractManager.HireReplacementDriver();
					base.GetEntity(i).contractManager.FireDriver(base.GetEntity(i).GetDriver(2), Contract.ContractTerminationType.FiredByPlayer);
					base.GetEntity(i).contractManager.HireReplacementDriver();
					base.GetEntity(i).headquarters.ResetHeadquarters();
					base.GetEntity(i).sponsorController.ClearAllSponsors();
					base.GetEntity(i).sponsorController.ClearAllSponsorOffers();
					base.GetEntity(i).teamID = 3000;
					StringVariableParser.rumourTeam = base.GetEntity(i);
					Game.instance.dialogSystem.SendMail(new DialogCriteria[]
					{
						new DialogCriteria("Who", "MediaPerson"),
						new DialogCriteria("Source", "Remove"),
						new DialogCriteria("Type", "Header")
					});
					num2 = i - 1;
				}
				if (Game.instance.time.now.Month < 6 && random < add && Game.instance.championshipManager.GetChampionshipByID(base.GetEntity(i).championship.championshipID).standings.GetTeamList().Count < 12 && base.GetEntity(i).teamID == 1000 && !flag && !flag2 && !flag3 && num2 == i)
				{
					Game.instance.championshipManager.GetChampionshipByID(base.GetEntity(i).championship.championshipID).AddTeamEntry(base.GetEntity(i));
					base.GetEntity(i).votingCharacteristics = this.GetCharacteristics(teamData[random2].GetStringValue("Political Attributes"));
					base.GetEntity(i).name = teamData[random2].GetStringValue("Name");
					base.GetEntity(i).locationID = teamData[random2].GetStringValue("Location ID");
					base.GetEntity(i).colorID = teamData[random2].GetIntValue("Color");
					base.GetEntity(i).nationality = Nationality.GetNationalityByName(teamData[random2].GetStringValue("Location"));
					base.GetEntity(i).teamID = random2;
					base.GetEntity(i).aggression = teamData[random2].GetFloatValue("Aggression");
					if (RandomUtility.GetRandom01() < 0f)
					{
						base.GetEntity(i).contractManager.FireDriver(base.GetEntity(i).GetDriver(0), Contract.ContractTerminationType.FiredByPlayer);
						base.GetEntity(i).contractManager.HireReplacementDriver();
						base.GetEntity(i).contractManager.FireDriver(base.GetEntity(i).GetDriver(1), Contract.ContractTerminationType.FiredByPlayer);
						base.GetEntity(i).contractManager.HireReplacementDriver();
						base.GetEntity(i).contractManager.FireDriver(base.GetEntity(i).GetDriver(2), Contract.ContractTerminationType.FiredByPlayer);
						base.GetEntity(i).contractManager.HireReplacementDriver();
					}
					if (RandomUtility.GetRandom01() < 0.75f)
					{
						base.GetEntity(i).financeController.finance.currentBudget += (long)(teamData[random2].GetFloatValue("Budget") * 100000f);
					}
					if (RandomUtility.GetRandom01() < 0f)
					{
						base.GetEntity(i).headquarters.ResetHeadquarters();
					}
					if (RandomUtility.GetRandom01() < 0.1f)
					{
						base.GetEntity(i).sponsorController.ClearAllSponsors();
						base.GetEntity(i).sponsorController.ClearAllSponsorOffers();
					}
					if (RandomUtility.GetRandom01() < 1f)
					{
						base.GetEntity(i).carManager.AdaptPartsForNewSeason1(1f, 1.3f);
					}
					StringVariableParser.rumourTeam = base.GetEntity(i);
					Game.instance.dialogSystem.SendMail(new DialogCriteria[]
					{
						new DialogCriteria("Who", "MediaPerson"),
						new DialogCriteria("Source", "Add"),
						new DialogCriteria("Type", "Header")
					});
					num2 = i - 1;
				}
				if (Game.instance.time.now.Month < 6 && random < add && Game.instance.championshipManager.GetChampionshipByID(base.GetEntity(i).championship.championshipID).standings.GetTeamList().Count < 12 && base.GetEntity(i).teamID == 2000 && !flag && !flag2 && !flag3 && num2 == i)
				{
					Game.instance.championshipManager.GetChampionshipByID(base.GetEntity(i).championship.championshipID).AddTeamEntry(base.GetEntity(i));
					base.GetEntity(i).votingCharacteristics = this.GetCharacteristics(teamData[random2].GetStringValue("Political Attributes"));
					base.GetEntity(i).name = teamData[random2].GetStringValue("Name");
					base.GetEntity(i).locationID = teamData[random2].GetStringValue("Location ID");
					base.GetEntity(i).colorID = teamData[random2].GetIntValue("Color");
					base.GetEntity(i).nationality = Nationality.GetNationalityByName(teamData[random2].GetStringValue("Location"));
					base.GetEntity(i).teamID = random2;
					base.GetEntity(i).aggression = teamData[random2].GetFloatValue("Aggression");
					if (RandomUtility.GetRandom01() < 0f)
					{
						base.GetEntity(i).contractManager.FireDriver(base.GetEntity(i).GetDriver(0), Contract.ContractTerminationType.FiredByPlayer);
						base.GetEntity(i).contractManager.HireReplacementDriver();
						base.GetEntity(i).contractManager.FireDriver(base.GetEntity(i).GetDriver(1), Contract.ContractTerminationType.FiredByPlayer);
						base.GetEntity(i).contractManager.HireReplacementDriver();
						base.GetEntity(i).contractManager.FireDriver(base.GetEntity(i).GetDriver(2), Contract.ContractTerminationType.FiredByPlayer);
						base.GetEntity(i).contractManager.HireReplacementDriver();
					}
					if (RandomUtility.GetRandom01() < 0.75f)
					{
						base.GetEntity(i).financeController.finance.currentBudget += (long)(teamData[random2].GetFloatValue("Budget") * 100000f);
					}
					if (RandomUtility.GetRandom01() < 0f)
					{
						base.GetEntity(i).headquarters.ResetHeadquarters();
					}
					if (RandomUtility.GetRandom01() < 0.1f)
					{
						base.GetEntity(i).sponsorController.ClearAllSponsors();
						base.GetEntity(i).sponsorController.ClearAllSponsorOffers();
					}
					if (RandomUtility.GetRandom01() < 1f)
					{
						base.GetEntity(i).carManager.AdaptPartsForNewSeason1(1f, 1.3f);
					}
					StringVariableParser.rumourTeam = base.GetEntity(i);
					Game.instance.dialogSystem.SendMail(new DialogCriteria[]
					{
						new DialogCriteria("Who", "MediaPerson"),
						new DialogCriteria("Source", "Add"),
						new DialogCriteria("Type", "Header")
					});
					num2 = i - 1;
				}
				if (Game.instance.time.now.Month < 6 && random < add && Game.instance.championshipManager.GetChampionshipByID(base.GetEntity(i).championship.championshipID).standings.GetTeamList().Count < 8 && base.GetEntity(i).teamID == 3000 && !flag && !flag2 && !flag3 && num2 == i)
				{
					Game.instance.championshipManager.GetChampionshipByID(base.GetEntity(i).championship.championshipID).AddTeamEntry(base.GetEntity(i));
					base.GetEntity(i).votingCharacteristics = this.GetCharacteristics(teamData[random2].GetStringValue("Political Attributes"));
					base.GetEntity(i).name = teamData[random2].GetStringValue("Name");
					base.GetEntity(i).locationID = teamData[random2].GetStringValue("Location ID");
					base.GetEntity(i).colorID = teamData[random2].GetIntValue("Color");
					base.GetEntity(i).nationality = Nationality.GetNationalityByName(teamData[random2].GetStringValue("Location"));
					base.GetEntity(i).teamID = random2;
					base.GetEntity(i).aggression = teamData[random2].GetFloatValue("Aggression");
					if (RandomUtility.GetRandom01() < 0f)
					{
						base.GetEntity(i).contractManager.FireDriver(base.GetEntity(i).GetDriver(0), Contract.ContractTerminationType.FiredByPlayer);
						base.GetEntity(i).contractManager.HireReplacementDriver();
						base.GetEntity(i).contractManager.FireDriver(base.GetEntity(i).GetDriver(1), Contract.ContractTerminationType.FiredByPlayer);
						base.GetEntity(i).contractManager.HireReplacementDriver();
						base.GetEntity(i).contractManager.FireDriver(base.GetEntity(i).GetDriver(2), Contract.ContractTerminationType.FiredByPlayer);
						base.GetEntity(i).contractManager.HireReplacementDriver();
					}
					if (RandomUtility.GetRandom01() < 0.75f)
					{
						base.GetEntity(i).financeController.finance.currentBudget += (long)(teamData[random2].GetFloatValue("Budget") * 100000f);
					}
					if (RandomUtility.GetRandom01() < 0f)
					{
						base.GetEntity(i).headquarters.ResetHeadquarters();
					}
					if (RandomUtility.GetRandom01() < 0.1f)
					{
						base.GetEntity(i).sponsorController.ClearAllSponsors();
						base.GetEntity(i).sponsorController.ClearAllSponsorOffers();
					}
					if (RandomUtility.GetRandom01() < 1f)
					{
						base.GetEntity(i).carManager.AdaptPartsForNewSeason1(1f, 1.3f);
					}
					StringVariableParser.promotedTeam = base.GetEntity(i + teamData.Count + num);
					StringVariableParser.rumourTeam = base.GetEntity(i);
					Game.instance.dialogSystem.SendMail(new DialogCriteria[]
					{
						new DialogCriteria("Who", "MediaPerson"),
						new DialogCriteria("Source", "Add"),
						new DialogCriteria("Type", "Header")
					});
					num2 = i - 1;
				}
				float check = 0f;
				if (Game.instance.player.team.teamID == base.GetEntity(i).teamID && Game.instance.player.team.championship.championshipID != base.GetEntity(i).championship.championshipID && base.GetEntity(i).championship.championshipID < 999)
				{
					Game.instance.player.SendJobApplication(Game.instance.teamManager.GetEntity(i));
					check = 1f;
				}
				if (Game.instance.time.now.Month > 5 && base.GetEntity(i).teamID < 999 && ((float)i == team || (float)i == team2 || (float)i == team3) && check == 0f)
				{
					Game.instance.player.SendJobApplication(Game.instance.teamManager.GetEntity(i));
				}
			}
			for (int j2 = 0; j2 < teamData.Count + num; j2++)
			{
				if (base.GetEntity(j2).teamID > 999 && Game.instance.time.now.Month > 6)
				{
					Game.instance.championshipManager.GetChampionshipByID(base.GetEntity(0).championship.championshipID).AddTeamEntry(base.GetEntity(j2));
					base.GetEntity(j2).name = "Invited to PreSeason Test";
				}
				if (base.GetEntity(j2).teamID > 999 && Game.instance.time.now.Month < 6)
				{
					Game.instance.championshipManager.GetChampionshipByID(base.GetEntity(j2).championship.championshipID).RemoveTeamEntry(base.GetEntity(j2));
				}
			}
		}
	}
}
