using System;
using UnityEngine;

// Token: 0x020006C2 RID: 1730
public class PlayerScreen : UIScreen
{
	// Token: 0x060030DA RID: 12506 RVA: 0x0001C45B File Offset: 0x0001A65B
	public PlayerScreen()
	{
	}

	// Token: 0x060030DB RID: 12507 RVA: 0x0001D4AA File Offset: 0x0001B6AA
	public override void OnStart()
	{
		base.OnStart();
		this.playerWidget.OnStart();
	}

	// Token: 0x060030DC RID: 12508 RVA: 0x0013A414 File Offset: 0x00138614
	public override void OnEnter()
	{
		base.OnEnter();
		DLCManager dlcManager = App.instance.dlcManager;
		dlcManager.OnOwnedDlcChanged = (Action)Delegate.Combine(dlcManager.OnOwnedDlcChanged, new Action(this.jobsWidget.Setup));
		base.showNavigationBars = true;
		this.mPlayer = Game.instance.player;
		bool flag = !this.mPlayer.IsUnemployed();
		this.playerWidget.Setup(this.mPlayer);
		this.statsWidget.Setup(this.mPlayer);
		this.careerWidget.Setup(this.mPlayer);
		this.trophiesWidget.Setup(this.mPlayer);
		this.jobsWidget.Setup();
		GameUtility.SetActive(this.notificationsWidget.gameObject, !flag);
		GameUtility.SetActive(this.applicationsWidget.gameObject, this.mPlayer.jobApplications.Count > 0);
		GameUtility.SetActive(this.chairmanWidget.gameObject, flag);
		if (!flag)
		{
			this.notificationsWidget.Setup();
		}
		else
		{
			this.chairmanWidget.Setup(this.mPlayer);
		}
		if (this.applicationsWidget.gameObject.activeSelf)
		{
			this.applicationsWidget.Setup();
		}
		scSoundManager.Instance.PlaySound(SoundID.Sfx_TransitionHome, 0f);
	}

	// Token: 0x060030DD RID: 12509 RVA: 0x0013A564 File Offset: 0x00138764
	public override void OnExit()
	{
		base.OnExit();
		this.notificationsWidget.OnExit();
		DLCManager dlcManager = App.instance.dlcManager;
		dlcManager.OnOwnedDlcChanged = (Action)Delegate.Remove(dlcManager.OnOwnedDlcChanged, new Action(this.jobsWidget.Setup));
	}

	// Token: 0x060030DE RID: 12510
	public void OnGUI()
	{
		if (Game.instance.player.rebirthDebug)
		{
			GUI.Button(new Rect((float)Screen.width * 0.05f, (float)Screen.height * 0.1f, 200f, 900f), string.Concat(new string[]
			{
				"Debug Menu : ",
				Game.instance.player.rebirthDebug.ToString(),
				"\n",
				Game.instance.player.managementBuyoutmanagementBuyoutOn,
				"\n",
				Game.instance.player.managementBuyoutMainText + " " + Game.instance.player.managementBuyoutSubtext,
				"\n",
				Game.instance.player.managementBuyoutLogoStyle.ToString(),
				"\n",
				Game.instance.player.managementBuyoutPrimaryColour,
				"\n",
				Game.instance.player.managementBuyoutSecondaryColour
			}));
			if (GUI.Button(new Rect((float)Screen.width * 0.16f, (float)Screen.height * 0.1f, 200f, 100f), "Fire Player"))
			{
				Game.instance.MakePlayerUnemployed();
			}
			if (GUI.Button(new Rect((float)Screen.width * 0.27f, (float)Screen.height * 0.1f, 200f, 100f), "Fire & Rehire Player"))
			{
				Team team = Game.instance.player.team;
				Game.instance.MakePlayerUnemployed();
				Game.instance.MakePlayerEmployed(team);
			}
			if (GUI.Button(new Rect((float)Screen.width * 0.38f, (float)Screen.height * 0.1f, 200f, 100f), "ManagementBuyout"))
			{
				Game.instance.player.team.customLogo.teamFirstName = Game.instance.player.managementBuyoutMainText;
				Game.instance.player.team.customLogo.teamLasttName = Game.instance.player.managementBuyoutSubtext;
				Game.instance.player.team.name = Game.instance.player.managementBuyoutFullname;
				Game.instance.player.team.customLogo.styleID = Game.instance.player.managementBuyoutLogoStyle - 1;
				Game.instance.player.team.GetTeamColor().customLogoColor.primary = Game.instance.player.team.GetTeamColor().livery.primary;
				Game.instance.player.team.GetTeamColor().customLogoColor.secondary = Game.instance.player.team.GetTeamColor().livery.secondary;
				Game.instance.player.hasCreatedTeam = true;
				Game.instance.player.createdTeamID = Game.instance.player.team.teamID;
				Game.instance.player.team.isCreatedByPlayer = true;
				MovieScreen screen = UIManager.instance.GetScreen<MovieScreen>();
				screen.PlayTeamMovie(SoundID.Video_TeamLogo, Game.instance.player.team.teamID);
				screen.SetNextScreen("PlayerScreen", 1.5f, null);
				UIManager.instance.ChangeScreen("MovieScreen", UIManager.ScreenTransition.None, 0f, null, UIManager.NavigationType.Normal);
				Game.instance.player.team.HandleChairmanRetirementRequest(Game.instance.player.team.chairman);
				UIManager.instance.ClearNavigationStacks();
				Game.instance.player.team.chairman.ModifyHappiness(100f, "Happy to invest in the team");
			}
			if (GUI.Button(new Rect((float)Screen.width * 0.49f, (float)Screen.height * 0.1f, 200f, 100f), "Skip Race Weekends: " + Game.instance.player.skipraceweekends.ToString()))
			{
				Game.instance.player.skipraceweekends = !Game.instance.player.skipraceweekends;
			}
			if (GUI.Button(new Rect((float)Screen.width * 0.6f, (float)Screen.height * 0.1f, 200f, 100f), "Team Rebrand"))
			{
				Game.instance.teamManager.TeamRebrand();
			}
		}
	}

	// Token: 0x04002CB3 RID: 11443
	public UIPlayerWidget playerWidget;

	// Token: 0x04002CB4 RID: 11444
	public UIPlayerStatsWidget statsWidget;

	// Token: 0x04002CB5 RID: 11445
	public UIPlayerNotificationsWidget notificationsWidget;

	// Token: 0x04002CB6 RID: 11446
	public UIPlayerHappinessWidget chairmanWidget;

	// Token: 0x04002CB7 RID: 11447
	public UIPlayerAvailableJobsWidget jobsWidget;

	// Token: 0x04002CB8 RID: 11448
	public UIPlayerJobApplicationsWidget applicationsWidget;

	// Token: 0x04002CB9 RID: 11449
	public PersonCareerWidget careerWidget;

	// Token: 0x04002CBA RID: 11450
	public UIPlayerTrophiesWidget trophiesWidget;

	// Token: 0x04002CBB RID: 11451
	private Player mPlayer;
}
