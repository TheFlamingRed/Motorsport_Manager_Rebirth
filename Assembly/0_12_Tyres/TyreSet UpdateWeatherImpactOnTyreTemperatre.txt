using System;
using FullSerializer;
using UnityEngine;

// Token: 0x02000428 RID: 1064
[fsObject(MemberSerialization = fsMemberSerialization.OptOut)]
public partial class TyreSet
{
	// Token: 0x06001E08 RID: 7688
	private void UpdateWeatherImpactOnTyreTemperature()
	{
		if (!this.mVehicle.HasStopped())
		{
			Weather currentWeather = Game.instance.sessionManager.currentSessionWeather.GetCurrentWeather();
			float num = 0f;
			int weatherTemperatureGainStart = this.mCompoundDesignData.weatherTemperatureGainStart;
			int weatherTemperatureLossStart = this.mCompoundDesignData.weatherTemperatureLossStart;
			float weatherMinTempDelta = this.mCompoundDesignData.weatherMinTempDelta;
			float weatherUnitChangePerDegree = this.mCompoundDesignData.weatherUnitChangePerDegree;
			float minMaxWeatherTemperatureRateChangeClamp = DesignDataManager.instance.tyreData.minMaxWeatherTemperatureRateChangeClamp;
			if (currentWeather.airTemperature >= weatherTemperatureGainStart)
			{
				num = weatherMinTempDelta;
				num += (float)(currentWeather.airTemperature - weatherTemperatureGainStart) * weatherUnitChangePerDegree;
			}
			else if (currentWeather.airTemperature <= weatherTemperatureLossStart)
			{
				num = -weatherMinTempDelta;
				num -= (float)(weatherTemperatureLossStart - currentWeather.airTemperature) * weatherUnitChangePerDegree;
			}
			num = Mathf.Clamp(num, -minMaxWeatherTemperatureRateChangeClamp, minMaxWeatherTemperatureRateChangeClamp);
			float tyreType = 1f;
			if (this.mVehicle.championship.rules.tyreType == ChampionshipRules.TyreType.Grooved)
			{
				tyreType = 1f;
			}
			if (this.mVehicle.championship.rules.tyreType == ChampionshipRules.TyreType.Low)
			{
				tyreType = 1.5f;
			}
			if (this.mVehicle.championship.rules.tyreType == ChampionshipRules.TyreType.Normal)
			{
				tyreType = 2f;
			}
			if (this.mVehicle.championship.rules.tyreType == ChampionshipRules.TyreType.Road)
			{
				tyreType = 0.5f;
			}
			if (this.mVehicle.championship.rules.tyreType == ChampionshipRules.TyreType.Wide)
			{
				tyreType = 3f;
			}
			num *= tyreType;
			num = num / 60f * GameTimer.simulationDeltaTime;
			this.mAirTempRateChange = num;
			this.SetTemperature(this.mTemperature + num);
		}
	}
}
